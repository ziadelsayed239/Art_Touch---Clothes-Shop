@model List<DAL.Data.Models.Product>
@{
    ViewData["Title"] = "Best Sellers";
    Layout = "~/Views/Shared/_ShopLayout.cshtml";
}

<!-- Page Header -->
<div class="page-header">
    <div class="container">
        <h1>Best Sellers</h1>
        <p>Our most loved pieces that customers can't get enough of. These are the styles that define our collection.</p>
    </div>
</div>

<div style="padding: 0 0 80px; background: #f8f9fa; min-height: 60vh;">
    <div class="container">

        @if (!Model.Any())
        {
            <div style="text-align: center; padding: 60px 20px;">
                <i class="fas fa-fire" style="font-size: 64px; color: #ddd; margin-bottom: 20px;"></i>
                <h2 style="font-size: 24px; color: #666; margin-bottom: 15px;">No best sellers yet</h2>
                <p style="color: #999; margin-bottom: 30px;">Our best sellers will appear here based on customer favorites!</p>
                <a href="@Url.Action("Products", "Shop")" class="btn" style="background: #e91e63; color: white; padding: 12px 30px; border-radius: 25px; text-decoration: none; font-weight: 500;">
                    Browse All Products
                </a>
            </div>
        }
        else
        {
            <div class="products-grid">
                @foreach (var product in Model)
                {
                    <div class="product-card">
                        <div class="product-image">
 cursor/fix-product-details-and-update-branding-fb72
                            @if (product.IsNewArrival)
                            {
                                <span class="product-badge new">New</span>
                            }
                            @if (product.IsBestseller)
                            {
                                <span class="product-badge bestseller">Best Seller</span>
                            }

                            <span class="product-badge bestseller">Best Seller</span>
 master
                            <img src="@(product.Images != null && product.Images.Count > 0 ? product.Images.First().ImageUrl : "/images/placeholder-dress.jpg")" 
                                 alt="@product.Name" 
                                 onerror="this.src='/images/placeholder-dress.jpg'; this.onerror=null;" />
                            <div class="product-overlay">
                                <a href="@Url.Action("ProductDetails", "Shop", new { id = product.Id })" class="btn-view-details">
                                    <i class="fas fa-eye"></i> View Details
                                </a>
                                <button class="btn-add-to-cart" data-product-id="@product.Id">
                                    <i class="fas fa-shopping-cart"></i> Add to Cart
                                </button>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3>@product.Name</h3>
                            <p class="product-category">@(string.IsNullOrEmpty(product.Description) ? product.Category?.Name : product.Description)</p>
                            <div class="product-price">
                                @if (product.DiscountPrice.HasValue)
                                {
                                    <span class="price-current">$@product.DiscountPrice.Value.ToString("F2")</span>
                                    <span class="price-original">$@product.OriginalPrice.ToString("F2")</span>
                                }
                                else
                                {
                                    <span class="price-current">$@product.OriginalPrice.ToString("F2")</span>
                                }
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add to cart functionality
    const addToCartButtons = document.querySelectorAll('.btn-add-to-cart');
    addToCartButtons.forEach(button => {
        button.addEventListener('click', function() {
            const productId = this.dataset.productId;
            
            fetch('@Url.Action("AddToCart", "Shop")', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `productId=${productId}&quantity=1`
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Update cart count
                    const cartCount = document.querySelector('.cart-count');
                    if (cartCount) {
                        cartCount.textContent = data.cartCount;
                    }
                    
                    // Show success message
                    this.innerHTML = '<i class="fas fa-check"></i> Added!';
                    this.style.background = '#4caf50';
                    setTimeout(() => {
                        this.innerHTML = '<i class="fas fa-shopping-cart"></i> Add to Cart';
                        this.style.background = '#e91e63';
                    }, 2000);
                }
            });
        });
    });
});
</script> 